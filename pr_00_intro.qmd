---
output: html_document
title: "The soil profile"
editor_options: 
  chunk_output_type: console
---

```{r}
library(dplyr)
library(tibble)
library(gt)
library(gtExtras)
```

[what is etc]{.todo}

The soil profile description starts with an observation of the surface and works down. The chief task is delineating soil layers, or horizons, and describing their morphological character. Prior to that, some additional reference data should be recorded:

## Exposure type

The method by which the soil was exposed for observation affects which parameters can be recorded, or at least recorded reliably.

```{r}
#| label: tbl-pr-gear
#| tbl-cap: "Method of profile exposure"

dat_pr_gear <-
  tribble(~Code, ~Name,
          'P1', 'Quick pit – up to 0.5 m wide and generally no deeper than 1m',
          'P2', 'Full pit > 1 m wide, exposing the complete profile to regolith or bedrock',
          'E', 'Exposure – road cutting or similar, chipped back and cleaned',
          'C1', 'Relatively undisturbed soil core, < 50 mm diameter',
          'C2', 'Relatively undisturbed soil core, ≥ 50 mm diameter',
          'A', 'Auger sample (hand or mechanical, including e.g. post hole diggers)')

tbl_pr_gear <- gt(dat_pr_gear) |>
   tab_options(
    column_labels.font.weight = 'bold', 
    heading.title.font.weight = 'bold',
    table.align = 'center',
    table.width = '85%'
  ) |>
  tab_style(style = list(cell_text(color = 'red', weight = 'bold')),
            locations = cells_body(columns = 1)) |>
  cols_width(Code ~pct(20))

tbl_pr_gear
```

-   [A]{.ceg} samples generally cannot be used to determine soil structure due to the degree of disturbance.
-   Combined sampling is common in field mapping, e.g. small pit excavation to \~0.50-0.75 m and augering to a required depth in relatively well-understood landscapes. Record these as [P1]{.ceg}.
-   Gouge-style augers used in soft marine sediments may be included in [C2]{.ceg} even though they commonly narrow to \< 50 mm at their maximum depth.
-   [C1]{.ceg} style samplers are common in paddock-scale monitoring and research, where they are used for rapid surface measurement. These are not generally suitable for mapping as they cannot sample below the topsoil.

## Depth of observation

Record the maximum depth of observation in whole centimetres (e.g. '[100 cm]{.ceg}').

A full profile description ideally extends to bedrock, but this may not always be accessible with the equipment and time available. The target depth of observation for most applications in New Zealand is 100 cm. Classification systems like the NZSC and LUC rely on ruling out certain soil features within that depth range, as well as positively identifying others.

See [Appendix X](ap_01_equipment.qmd) for information on appropriate excavation equipment.

## Stopping early

When the target depth cannot be achieved, note the reason for stopping early using the codes in @tbl-ss-stoppage.

```{r}
#| label: tbl-ss-stoppage
#| tbl-cap: "Stoppage reason"

dat_ss_stoppage <-
  tribble(~Code, ~Name, ~Description,
          'B', 'Bedrock', 'underlying rock mass encountered, no more soil to describe',
          'R', 'Resistance', 'soil too difficult to extract with available equipment',
          'C', 'Collapse', 'excavation unstable or unsafe due to wetness or loose particle packing',
          'I', 'Identified', 'the depth required to confirm a key parameter was reached',
          'O', 'Other', 'circumstances unrelated to the soil itself caused early stoppage')

tbl_ss_stoppage <- gt(dat_ss_stoppage) |>
   tab_options(
    column_labels.font.weight = 'bold', 
    heading.title.font.weight = 'bold',
    table.align = 'center',
    table.width = '85%'
  ) |>
  tab_style(style = list(cell_text(color = 'red', weight = 'bold')),
            locations = cells_body(columns = 1)) |>
  cols_width(Code ~pct(20))

tbl_ss_stoppage
```
